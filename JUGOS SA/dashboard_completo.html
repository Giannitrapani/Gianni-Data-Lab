<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Dashboard Completo - Jugos S.A.</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1a1a1a; color: #e0e0e0; overflow: hidden; }
        .header { background: #0d333d; padding: 15px 25px; border-bottom: 2px solid #114c2a; display: flex; justify-content: space-between; align-items: center; }
        .header h1 { font-size: 1.6em; color: #ffffff; display: flex; align-items: center; gap: 15px; }
        .header h1 img { height: 45px; }
        .tabs { display: flex; gap: 10px; }
        .tab { padding: 10px 25px; background: #1B5E4E; border: none; border-radius: 4px 4px 0 0; cursor: pointer; font-size: 1em; font-weight: 600; color: #b0b0b0; transition: all 0.3s; }
        .tab:hover { background: #2C6E5D; color: #ffffff; }
        .tab.active { background: #2ECC71; color: #0d3d2f; }
        .content { height: calc(100vh - 70px); overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
        .page { display: none; height: 100%; }
        .page.active { display: block; }
    </style>
</head>
<body>
    <div class="header">
        <h1><img src="logo.png" alt="Jugos S.A."></h1>
        <div class="tabs">
            <button class="tab active" onclick="cambiarPagina('stock')">Stock Global</button>
            <button class="tab" onclick="cambiarPagina('proveedores')">Proveedores</button>
            <button class="tab" onclick="cambiarPagina('logistica')">Logística</button>
        </div>
    </div>
    <div class="content">
        <div id="page-stock" class="page active">
            <iframe id="iframe-stock" src=""></iframe>
        </div>
        <div id="page-proveedores" class="page">
            <iframe id="iframe-proveedores" src=""></iframe>
        </div>
        <div id="page-logistica" class="page">
            <iframe id="iframe-logistica" src=""></iframe>
        </div>
    </div>
    <script>
        // ================================================================
        // SISTEMA DE AUTO-RECARGA CADA 5 MINUTOS Y 30 SEGUNDOS
        // (30 seg extra para dar tiempo al .bat a terminar)
        // Cambiar 330000 a 3720000 para 1 hora y 2 minutos
        // ================================================================

        // Función para cargar los iframes con timestamp (evita cache)
        function cargarIframes() {
            const timestamp = new Date().getTime();
            document.getElementById('iframe-stock').src = 'dashboard.html?v=' + timestamp;
            document.getElementById('iframe-proveedores').src = 'proveedores.html?v=' + timestamp;
            document.getElementById('iframe-logistica').src = 'logistica.html?v=' + timestamp;
            console.log('[' + new Date().toLocaleTimeString() + '] Dashboards recargados');
        }

        // Función para cambiar de pestaña
        function cambiarPagina(pagina) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById('page-' + pagina).classList.add('active');
            event.target.classList.add('active');
        }

        // Cargar iframes al inicio
        cargarIframes();

        // Auto-recargar cada 5 minutos y 30 segundos (330000 ms)
        setInterval(cargarIframes, 330000);

        console.log('Sistema de auto-recarga activado (cada 5 min 30 seg)');
    </script>
</body>
</html>
